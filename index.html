<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåç Expat Portfolio Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto auto;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .dashboard-box {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e1e8ed;
        }

        .box-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f1f3f4;
        }

        .box-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
        }

        /* Market Status Box */
        .market-status {
            grid-column: 1 / -1;
        }

        .markets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .market-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .market-item.closed {
            border-left-color: #dc3545;
        }

        .market-item.weekend {
            border-left-color: #ffc107;
        }

        .market-name {
            font-weight: 500;
        }

        .market-status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-open {
            background: #d4edda;
            color: #155724;
        }

        .status-closed {
            background: #f8d7da;
            color: #721c24;
        }

        .status-weekend {
            background: #fff3cd;
            color: #856404;
        }

        /* Portfolio Summary */
        .portfolio-summary {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-top: 1rem;
        }

        .summary-item {
            text-align: center;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .summary-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .summary-label {
            font-size: 0.9rem;
            color: #6c757d;
            margin-top: 0.5rem;
        }

        .positive { color: #28a745; }
        .negative { color: #dc3545; }

        /* Chart Container */
        .chart-container {
            height: 300px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 1rem;
            position: relative;
        }

        .chart-placeholder {
            color: #6c757d;
            font-size: 1.1rem;
        }

        /* Individual Stocks */
        .stocks-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
            transition: background-color 0.2s;
        }

        .stock-item:hover {
            background: #f8f9fa;
        }

        .stock-info {
            flex: 1;
        }

        .stock-symbol {
            font-weight: 600;
            color: #2c3e50;
        }

        .stock-name {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .stock-price {
            text-align: right;
            margin-right: 1rem;
        }

        .stock-change {
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Currency Converter */
        .currency-converter {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: end;
            margin-top: 1rem;
        }

        .currency-input {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .currency-input label {
            font-weight: 500;
            color: #495057;
        }

        .currency-input input,
        .currency-input select {
            padding: 0.8rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 1rem;
        }

        .convert-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .convert-btn:hover {
            background: #0056b3;
        }

        /* Add Stock Form */
        .add-stock-form {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 1rem;
            margin-top: 1rem;
        }

        .add-stock-form input {
            padding: 0.8rem;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 1rem;
        }

        .add-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .add-btn:hover {
            background: #218838;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .portfolio-summary {
                grid-template-columns: 1fr;
            }

            .currency-converter {
                grid-template-columns: 1fr;
            }

            .add-stock-form {
                grid-template-columns: 1fr;
            }
        }

        /* SVG Line Chart */
        .line-chart {
            width: 100%;
            height: 100%;
        }

        .chart-line {
            fill: none;
            stroke: #007bff;
            stroke-width: 2;
        }

        .chart-area {
            fill: rgba(0, 123, 255, 0.1);
        }

        .chart-grid {
            stroke: #e9ecef;
            stroke-width: 1;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">üåç Expat Portfolio Tracker</div>
                <div class="user-info">
                    <span>Welcome, User</span>
                    <span>|</span>
                    <span id="current-time"></span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-grid">
            <!-- Market Status Box -->
            <div class="dashboard-box market-status">
                <div class="box-header">
                    <div class="box-title">Global Market Status</div>
                    <div id="last-updated">Last updated: <span id="update-time"></span></div>
                </div>
                <div class="markets-grid" id="markets-grid">
                    <!-- Market items will be populated by JavaScript -->
                </div>
            </div>

            <!-- Portfolio Summary Box -->
            <div class="dashboard-box">
                <div class="box-header">
                    <div class="box-title">Portfolio Summary</div>
                </div>
                <div class="portfolio-summary">
                    <div class="summary-item">
                        <div class="summary-value" id="total-value">$0.00</div>
                        <div class="summary-label">Total Portfolio Value</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value positive" id="daily-change">+$0.00</div>
                        <div class="summary-label">Daily Change</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="total-stocks">0</div>
                        <div class="summary-label">Total Stocks</div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-value" id="currencies">0</div>
                        <div class="summary-label">Currencies</div>
                    </div>
                </div>
            </div>

            <!-- Currency Converter Box -->
            <div class="dashboard-box">
                <div class="box-header">
                    <div class="box-title">Currency Converter</div>
                </div>
                <div class="currency-converter">
                    <div class="currency-input">
                        <label>From</label>
                        <input type="number" id="from-amount" placeholder="Amount" value="1">
                        <select id="from-currency">
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="SGD">SGD</option>
                        </select>
                    </div>
                    <button class="convert-btn" onclick="convertCurrency()">Convert</button>
                    <div class="currency-input">
                        <label>To</label>
                        <input type="number" id="to-amount" placeholder="Result" readonly>
                        <select id="to-currency">
                            <option value="EUR">EUR</option>
                            <option value="USD">USD</option>
                            <option value="GBP">GBP</option>
                            <option value="JPY">JPY</option>
                            <option value="SGD">SGD</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Overall Stock Market Chart Box -->
            <div class="dashboard-box">
                <div class="box-header">
                    <div class="box-title">Market Overview</div>
                </div>
                <div class="chart-container">
                    <svg class="line-chart" viewBox="0 0 400 200">
                        <defs>
                            <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" style="stop-color:#007bff;stop-opacity:0.3" />
                                <stop offset="100%" style="stop-color:#007bff;stop-opacity:0" />
                            </linearGradient>
                        </defs>
                        <g class="chart-grid">
                            <line x1="0" y1="50" x2="400" y2="50" />
                            <line x1="0" y1="100" x2="400" y2="100" />
                            <line x1="0" y1="150" x2="400" y2="150" />
                            <line x1="100" y1="0" x2="100" y2="200" />
                            <line x1="200" y1="0" x2="200" y2="200" />
                            <line x1="300" y1="0" x2="300" y2="200" />
                        </g>
                        <path class="chart-area" d="M0,180 L50,160 L100,140 L150,120 L200,100 L250,110 L300,90 L350,70 L400,60 L400,200 L0,200 Z" fill="url(#areaGradient)" />
                        <path class="chart-line" d="M0,180 L50,160 L100,140 L150,120 L200,100 L250,110 L300,90 L350,70 L400,60" />
                    </svg>
                </div>
            </div>

            <!-- Individual Stocks Box -->
            <div class="dashboard-box">
                <div class="box-header">
                    <div class="box-title">Individual Stocks</div>
                </div>
                <div class="add-stock-form">
                    <input type="text" id="stock-symbol" placeholder="Stock Symbol (e.g., AAPL)">
                    <input type="number" id="stock-shares" placeholder="Number of Shares">
                    <button class="add-btn" onclick="addStock()">Add Stock</button>
                </div>
                <div class="stocks-list" id="stocks-list">
                    <!-- Stock items will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock data and functionality
        const markets = [
            { name: 'NYSE', timezone: 'America/New_York', openTime: '09:30', closeTime: '16:00' },
            { name: 'NASDAQ', timezone: 'America/New_York', openTime: '09:30', closeTime: '16:00' },
            { name: 'LSE', timezone: 'Europe/London', openTime: '08:00', closeTime: '16:30' },
            { name: 'TSE', timezone: 'Asia/Tokyo', openTime: '09:00', closeTime: '15:00' },
            { name: 'SGX', timezone: 'Asia/Singapore', openTime: '09:00', closeTime: '17:00' },
            { name: 'HKEX', timezone: 'Asia/Hong_Kong', openTime: '09:30', closeTime: '16:00' }
        ];

        const stocks = [
            { symbol: 'AAPL', name: 'Apple Inc.', price: 175.43, change: 2.15, shares: 10 },
            { symbol: 'GOOGL', name: 'Alphabet Inc.', price: 2847.63, change: -15.32, shares: 5 },
            { symbol: 'MSFT', name: 'Microsoft Corp.', price: 378.85, change: 5.21, shares: 8 },
            { symbol: 'TSLA', name: 'Tesla Inc.', price: 248.50, change: -8.75, shares: 3 }
        ];

        const exchangeRates = {
            'USD': { 'EUR': 0.85, 'GBP': 0.73, 'JPY': 110, 'SGD': 1.35 },
            'EUR': { 'USD': 1.18, 'GBP': 0.86, 'JPY': 129, 'SGD': 1.59 },
            'GBP': { 'USD': 1.37, 'EUR': 1.16, 'JPY': 150, 'SGD': 1.85 },
            'JPY': { 'USD': 0.009, 'EUR': 0.008, 'GBP': 0.007, 'SGD': 0.012 },
            'SGD': { 'USD': 0.74, 'EUR': 0.63, 'GBP': 0.54, 'JPY': 81 }
        };

        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString();
            document.getElementById('update-time').textContent = now.toLocaleTimeString();
        }

        function isMarketOpen(market) {
            const now = new Date();
            const dayOfWeek = now.getDay();
            
            // Weekend check
            if (dayOfWeek === 0 || dayOfWeek === 6) {
                return 'weekend';
            }
            
            // Simple time check (would need proper timezone handling in real app)
            const currentHour = now.getHours();
            const openHour = parseInt(market.openTime.split(':')[0]);
            const closeHour = parseInt(market.closeTime.split(':')[0]);
            
            if (currentHour >= openHour && currentHour < closeHour) {
                return 'open';
            }
            return 'closed';
        }

        function updateMarketStatus() {
            const marketsGrid = document.getElementById('markets-grid');
            marketsGrid.innerHTML = '';
            
            markets.forEach(market => {
                const status = isMarketOpen(market);
                const marketItem = document.createElement('div');
                marketItem.className = `market-item ${status}`;
                
                let statusText = status.charAt(0).toUpperCase() + status.slice(1);
                let statusClass = `status-${status}`;
                
                marketItem.innerHTML = `
                    <div class="market-name">${market.name}</div>
                    <div class="market-status-badge ${statusClass}">${statusText}</div>
                `;
                
                marketsGrid.appendChild(marketItem);
            });
        }

        function updatePortfolioSummary() {
            const totalValue = stocks.reduce((sum, stock) => sum + (stock.price * stock.shares), 0);
            const dailyChange = stocks.reduce((sum, stock) => sum + (stock.change * stock.shares), 0);
            
            document.getElementById('total-value').textContent = `$${totalValue.toFixed(2)}`;
            document.getElementById('daily-change').textContent = `${dailyChange >= 0 ? '+' : ''}$${dailyChange.toFixed(2)}`;
            document.getElementById('daily-change').className = `summary-value ${dailyChange >= 0 ? 'positive' : 'negative'}`;
            document.getElementById('total-stocks').textContent = stocks.length;
            document.getElementById('currencies').textContent = '5';
        }

        function updateStocksList() {
            const stocksList = document.getElementById('stocks-list');
            stocksList.innerHTML = '';
            
            stocks.forEach(stock => {
                const stockItem = document.createElement('div');
                stockItem.className = 'stock-item';
                
                stockItem.innerHTML = `
                    <div class="stock-info">
                        <div class="stock-symbol">${stock.symbol}</div>
                        <div class="stock-name">${stock.name}</div>
                    </div>
                    <div class="stock-price">
                        <div>$${stock.price.toFixed(2)}</div>
                        <div class="stock-change ${stock.change >= 0 ? 'positive' : 'negative'}">
                            ${stock.change >= 0 ? '+' : ''}${stock.change.toFixed(2)}
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div>Shares: ${stock.shares}</div>
                        <div style="font-weight: bold;">$${(stock.price * stock.shares).toFixed(2)}</div>
                    </div>
                `;
                
                stocksList.appendChild(stockItem);
            });
        }

        function convertCurrency() {
            const fromAmount = parseFloat(document.getElementById('from-amount').value);
            const fromCurrency = document.getElementById('from-currency').value;
            const toCurrency = document.getElementById('to-currency').value;
            
            if (fromCurrency === toCurrency) {
                document.getElementById('to-amount').value = fromAmount.toFixed(2);
                return;
            }
            
            const rate = exchangeRates[fromCurrency][toCurrency];
            const result = fromAmount * rate;
            document.getElementById('to-amount').value = result.toFixed(2);
        }

        function addStock() {
            const symbol = document.getElementById('stock-symbol').value.toUpperCase();
            const shares = parseInt(document.getElementById('stock-shares').value);
            
            if (!symbol || !shares) {
                alert('Please enter both stock symbol and number of shares');
                return;
            }
            
            // Mock stock data (in real app, would fetch from API)
            const newStock = {
                symbol: symbol,
                name: symbol + ' Corp.',
                price: Math.random() * 200 + 50,
                change: (Math.random() - 0.5) * 20,
                shares: shares
            };
            
            stocks.push(newStock);
            updateStocksList();
            updatePortfolioSummary();
            
            // Clear form
            document.getElementById('stock-symbol').value = '';
            document.getElementById('stock-shares').value = '';
        }

        // Initialize dashboard
        function init() {
            updateTime();
            updateMarketStatus();
            updatePortfolioSummary();
            updateStocksList();
            
            // Update time every second
            setInterval(updateTime, 1000);
            
            // Update market status every minute
            setInterval(updateMarketStatus, 60000);
        }

        // Start the application
        init();
    </script>
</body>
</html>
