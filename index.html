<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expat Portfolio Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature-card h3 {
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .currency-converter {
            background: rgba(255, 255, 255, 0.15);
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 16px;
        }

        button {
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        button:hover {
            background: #45a049;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 1.2em;
            text-align: center;
        }

        .market-hours {
            background: rgba(255, 255, 255, 0.1);
        }

        .market-status {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .status-open {
            color: #4CAF50;
        }

        .status-closed {
            color: #f44336;
        }

        .coming-soon {
            text-align: center;
            font-style: italic;
            opacity: 0.8;
        }

        /* Advertisement Section */
        .ads-section {
            margin-top: 60px;
            padding: 40px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .ads-section h3 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.8em;
            opacity: 0.9;
        }

        .ad-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .ad-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            transition: transform 0.3s, background 0.3s;
        }

        .ad-box:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .ad-box h4 {
            margin-bottom: 10px;
            font-size: 1.2em;
            color: #fff;
        }

        .ad-box p {
            margin-bottom: 15px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .ad-button {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            width: auto;
        }

        .ad-button:hover {
            background: linear-gradient(45deg, #ff5252, #ff7979);
            transform: scale(1.05);
        }

        .ad-disclaimer {
            text-align: center;
            margin-top: 20px;
            opacity: 0.7;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸŒ Expat Portfolio Tracker</h1>
            <p class="subtitle">Track your international investments across multiple currencies</p>
        </header>

        <div class="features">
            <!-- Currency Converter -->
            <div class="feature-card currency-converter">
                <h3>ğŸ’± Currency Converter</h3>
                <div class="input-group">
                    <label for="amount">Amount:</label>
                    <input type="number" id="amount" placeholder="Enter amount" value="1000">
                </div>
                <div class="input-group">
                    <label for="fromCurrency">From:</label>
                    <select id="fromCurrency">
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ SGD - Singapore Dollar</option>
                        <option value="USD">ğŸ‡ºğŸ‡¸ USD - US Dollar</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º EUR - Euro</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ GBP - British Pound</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ JPY - Japanese Yen</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ CAD - Canadian Dollar</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º AUD - Australian Dollar</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° HKD - Hong Kong Dollar</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ MYR - Malaysian Ringgit</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ CHF - Swiss Franc</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="toCurrency">To:</label>
                    <select id="toCurrency">
                        <option value="USD">ğŸ‡ºğŸ‡¸ USD - US Dollar</option>
                        <option value="SGD">ğŸ‡¸ğŸ‡¬ SGD - Singapore Dollar</option>
                        <option value="EUR">ğŸ‡ªğŸ‡º EUR - Euro</option>
                        <option value="GBP">ğŸ‡¬ğŸ‡§ GBP - British Pound</option>
                        <option value="JPY">ğŸ‡¯ğŸ‡µ JPY - Japanese Yen</option>
                        <option value="CAD">ğŸ‡¨ğŸ‡¦ CAD - Canadian Dollar</option>
                        <option value="AUD">ğŸ‡¦ğŸ‡º AUD - Australian Dollar</option>
                        <option value="HKD">ğŸ‡­ğŸ‡° HKD - Hong Kong Dollar</option>
                        <option value="MYR">ğŸ‡²ğŸ‡¾ MYR - Malaysian Ringgit</option>
                        <option value="CHF">ğŸ‡¨ğŸ‡­ CHF - Swiss Franc</option>
                    </select>
                </div>
                <button onclick="convertCurrency()">Convert</button>
                <div id="conversionResult" class="result" style="display: none;"></div>
            </div>

            <!-- Market Hours -->
            <div class="feature-card market-hours">
                <h3>ğŸ• Global Market Hours</h3>
                <div id="marketHours">
                    <div class="market-status">
                        <span>ğŸ‡ºğŸ‡¸ NYSE (New York)</span>
                        <span id="nyseStatus" class="status-closed">Closed</span>
                    </div>
                    <div class="market-status">
                        <span>ğŸ‡¬ğŸ‡§ LSE (London)</span>
                        <span id="lseStatus" class="status-closed">Closed</span>
                    </div>
                    <div class="market-status">
                        <span>ğŸ‡¯ğŸ‡µ TSE (Tokyo)</span>
                        <span id="tseStatus" class="status-closed">Closed</span>
                    </div>
                    <div class="market-status">
                        <span>ğŸ‡¦ğŸ‡º ASX (Sydney)</span>
                        <span id="asxStatus" class="status-closed">Closed</span>
                    </div>
                </div>
            </div>

            <!-- Portfolio Tracker -->
            <div class="feature-card">
                <h3>ğŸ“Š Portfolio Tracker</h3>
                <p class="coming-soon">Coming soon! Add your stocks and track performance across currencies.</p>
            </div>

            <!-- Tax Calculator -->
            <div class="feature-card">
                <h3>ğŸ’¼ Tax Calculator</h3>
                <div class="input-group">
                    <label for="taxCountry">Tax Residence:</label>
                    <select id="taxCountry">
                        <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                        <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                        <option value="UK">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                        <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                        <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                        <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                        <option value="FR">ğŸ‡«ğŸ‡· France</option>
                        <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                        <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                        <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                        <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                        <option value="AE">ğŸ‡¦ğŸ‡ª UAE</option>
                        <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                        <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                        <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="investmentType">Investment Type:</label>
                    <select id="investmentType">
                        <option value="stocks">Stocks/Shares</option>
                        <option value="dividends">Dividends</option>
                        <option value="bonds">Bonds/Fixed Income</option>
                        <option value="reit">REITs</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="capitalGain">Capital Gain/Loss (SGD):</label>
                    <input type="number" id="capitalGain" placeholder="Enter gain/loss amount">
                </div>
                <div class="input-group">
                    <label for="holdingPeriod">Holding Period (months):</label>
                    <input type="number" id="holdingPeriod" placeholder="How long did you hold?">
                </div>
                <div class="input-group">
                    <label for="withholdingTax">Withholding Tax Paid (%):</label>
                    <input type="number" id="withholdingTax" placeholder="e.g., 30 for US stocks" step="0.1">
                </div>
                <button onclick="calculateTax()">Calculate Tax</button>
                <div id="taxResult" class="result" style="display: none;"></div>
            </div>
        </div>

        <!-- Advertisement Section -->
        <div class="ads-section">
            <h3>ğŸ“¢ Sponsored</h3>
            <div class="ad-container">
                <div class="ad-box">
                    <h4>ğŸ¦ Best International Brokers</h4>
                    <p>Compare fees and features for global investing</p>
                    <button class="ad-button">Learn More</button>
                </div>
                <div class="ad-box">
                    <h4>ğŸ’³ Multi-Currency Cards</h4>
                    <p>Save on forex fees with expat-friendly cards</p>
                    <button class="ad-button">Get Started</button>
                </div>
                <div class="ad-box">
                    <h4>ğŸ“Š Tax Advisory Services</h4>
                    <p>Expert tax help for international investors</p>
                    <button class="ad-button">Book Consultation</button>
                </div>
            </div>
            <div class="ad-disclaimer">
                <small>* This is a demo advertisement section. Real ads would generate revenue through Google AdSense, affiliate partnerships, or sponsored content.</small>
            </div>
        </div>
    </div>

    <script>
        // Currency conversion function
        async function convertCurrency() {
            const amount = document.getElementById('amount').value;
            const fromCurrency = document.getElementById('fromCurrency').value;
            const toCurrency = document.getElementById('toCurrency').value;
            const resultDiv = document.getElementById('conversionResult');

            if (!amount || amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }

            if (fromCurrency === toCurrency) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `${amount} ${fromCurrency} = ${amount} ${toCurrency}`;
                return;
            }

            try {
                // Using a free currency API
                const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${fromCurrency}`);
                const data = await response.json();
                
                const rate = data.rates[toCurrency];
                const convertedAmount = (amount * rate).toFixed(2);
                
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `${amount} ${fromCurrency} = ${convertedAmount} ${toCurrency}<br><small>Rate: 1 ${fromCurrency} = ${rate.toFixed(4)} ${toCurrency}</small>`;
            } catch (error) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = 'Error fetching exchange rates. Please try again.';
            }
        }

        // Market hours checker
        function updateMarketHours() {
            const now = new Date();
            const utcTime = now.getTime() + (now.getTimezoneOffset() * 60000);
            
            // Market hours in UTC
            const markets = {
                nyse: { open: 14.5, close: 21, name: 'nyseStatus' }, // 9:30 AM - 4:00 PM EST
                lse: { open: 8, close: 16.5, name: 'lseStatus' },    // 8:00 AM - 4:30 PM GMT
                tse: { open: 0, close: 6, name: 'tseStatus' },       // 9:00 AM - 3:00 PM JST
                asx: { open: 23, close: 6, name: 'asxStatus' }       // 10:00 AM - 4:00 PM AEST
            };

            const currentUTCHour = new Date(utcTime).getUTCHours() + (new Date(utcTime).getUTCMinutes() / 60);
            
            Object.keys(markets).forEach(market => {
                const marketInfo = markets[market];
                const statusElement = document.getElementById(marketInfo.name);
                
                let isOpen = false;
                if (marketInfo.open < marketInfo.close) {
                    isOpen = currentUTCHour >= marketInfo.open && currentUTCHour < marketInfo.close;
                } else {
                    // Market crosses midnight
                    isOpen = currentUTCHour >= marketInfo.open || currentUTCHour < marketInfo.close;
                }
                
                statusElement.textContent = isOpen ? 'Open' : 'Closed';
                statusElement.className = isOpen ? 'status-open' : 'status-closed';
            });
        }

        // Update market hours every minute
        updateMarketHours();
        setInterval(updateMarketHours, 60000);

        // Tax calculation function
        function calculateTax() {
            const country = document.getElementById('taxCountry').value;
            const investmentType = document.getElementById('investmentType').value;
            const capitalGain = parseFloat(document.getElementById('capitalGain').value);
            const holdingPeriod = parseInt(document.getElementById('holdingPeriod').value);
            const withholdingTax = parseFloat(document.getElementById('withholdingTax').value) || 0;
            const resultDiv = document.getElementById('taxResult');

            if (!capitalGain || !holdingPeriod) {
                alert('Please enter capital gain and holding period');
                return;
            }

            let taxRate = 0;
            let taxInfo = '';
            let finalTax = 0;

            // Tax rates by country (simplified)
            const taxRates = {
                'SG': { rate: 0, info: 'Singapore: No capital gains tax for individual investors' },
                'US': { rate: holdingPeriod >= 12 ? 0.15 : 0.22, info: holdingPeriod >= 12 ? 'US: Long-term capital gains (15%)' : 'US: Short-term capital gains (22%)' },
                'UK': { rate: 0.10, info: 'UK: Capital gains tax (10% basic rate)' },
                'AU': { rate: holdingPeriod >= 12 ? 0.225 : 0.45, info: holdingPeriod >= 12 ? 'Australia: CGT with 50% discount' : 'Australia: Full CGT rate' },
                'CA': { rate: 0.25, info: 'Canada: 50% of capital gains taxable' },
                'DE': { rate: 0.25, info: 'Germany: Capital gains tax (25%)' },
                'FR': { rate: 0.30, info: 'France: Capital gains tax (30%)' },
                'NL': { rate: 0.31, info: 'Netherlands: Box 3 tax (31%)' },
                'CH': { rate: 0, info: 'Switzerland: No capital gains tax for private investors' },
                'JP': { rate: 0.20, info: 'Japan: Capital gains tax (20%)' },
                'HK': { rate: 0, info: 'Hong Kong: No capital gains tax' },
                'AE': { rate: 0, info: 'UAE: No capital gains tax' },
                'NZ': { rate: 0, info: 'New Zealand: No capital gains tax for most investors' },
                'IN': { rate: holdingPeriod >= 12 ? 0.10 : 0.15, info: holdingPeriod >= 12 ? 'India: Long-term CGT (10%)' : 'India: Short-term CGT (15%)' },
                'MY': { rate: 0, info: 'Malaysia: No capital gains tax for individuals' }
            };

            const countryTax = taxRates[country] || { rate: 0.20, info: 'Default: 20% capital gains tax' };
            taxRate = countryTax.rate;
            taxInfo = countryTax.info;

            // Calculate tax
            if (capitalGain > 0) {
                finalTax = capitalGain * taxRate;
                const withholdingAmount = capitalGain * (withholdingTax / 100);
                const netTax = Math.max(0, finalTax - withholdingAmount);

                resultDiv.innerHTML = `
                    <strong>${taxInfo}</strong><br>
                    Capital Gain: SGD ${capitalGain.toLocaleString()}<br>
                    Tax Rate: ${(taxRate * 100).toFixed(1)}%<br>
                    Gross Tax: SGD ${finalTax.toLocaleString()}<br>
                    Withholding Tax Paid: SGD ${withholdingAmount.toLocaleString()}<br>
                    <strong>Net Tax Due: SGD ${netTax.toLocaleString()}</strong>
                `;
            } else {
                resultDiv.innerHTML = `
                    <strong>${taxInfo}</strong><br>
                    Capital Loss: SGD ${Math.abs(capitalGain).toLocaleString()}<br>
                    <strong>No tax due on losses</strong><br>
                    <small>Losses may be deductible against future gains</small>
                `;
            }

            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>
